<div class="search_container">
  <h4>Shipping address</h4>
  <div class="search_bar">
    <input
      type="text"
      (keyup)="onKey($event)"
      (focus)="openDropdown()"
      placeholder="Enter postcode or address"
    />
    <div
      *ngIf="
        isDropdownOpen &&
        addresses?.options?.length > 0 &&
        searchLength.length > 0
      "
      #dropdownContainer
      class="dropdown_container"
    >
      <div class="dropdown_header">
        <!-- headers for autocomplete -->
        <div
          class="suggestions_header"
          *ngIf="addresses?.type === 'autocomplete'"
        >
          <div class="header_text">SUGGESTIONS</div>
          <div class="header_close" (click)="closeDropdown()"></div>
        </div>

        <div class="suggestions_header" *ngIf="addresses?.type === 'drilldown'">
          <!-- <div class="header_text">{{ addresses?.options?.[0]?.value }}</div> -->
          <div class="drilldown_header">
            <div (click)="back()" class="header_back"></div>
            <div class="header_text">
              {{ processAddress(addresses?.options?.[0])?.modifiedValue }}
            </div>
          </div>
          <div class="header_close" (click)="closeDropdown()"></div>
        </div>
      </div>
      <div
        class="address_item"
        *ngFor="let option of addresses.options"
        (click)="selectAddress(option)"
      >
        <div
          class="address_value"
          [innerHTML]="
            modifyAddressString(option.value, option.format.highlights)
          "
        ></div>
        <div class="drill_down" *ngIf="option.suffix">
          {{ "(" + option.suffix + ")" }}
        </div>
      </div>
    </div>
  </div>
</div>
